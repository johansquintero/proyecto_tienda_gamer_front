<div class="container">
	<mat-card class="card">
		<mat-card-header class="title">
			@if (sharedProducto) {
			<mat-card-title class="title__text">ACTUALIZAR {{ sharedProducto.name.toUpperCase() }}</mat-card-title>
			}@else {
			<mat-card-title class="title__text">REGISTRA UN NUEVO PRODUCTO</mat-card-title>
			}
		</mat-card-header>
		<img
			mat-card-image
			src="https://www.accesoriosparacomputadores.co/blog/wp-content/uploads/2020/02/armar-un-pc-para-gamer.jpg"
			alt="Photo of a Shiba Inu"
		/>
		<mat-card-content>
			<form class="form" [formGroup]="formGroup">
				<mat-form-field appearance="outline">
					<mat-label>Nombre del producto:</mat-label>
					<input matInput type="text" formControlName="name" />
					<mat-error> {{ getErrorField(formGroup, 'name') }} </mat-error>
				</mat-form-field>

				<mat-form-field appearance="outline">
					<mat-label>Descripcion del producto:</mat-label>
					<input matInput type="text-area" formControlName="description" />
					<mat-error>{{ getErrorField(formGroup, 'description') }}</mat-error>
				</mat-form-field>

				<mat-form-field appearance="outline">
					<mat-label>Precio del producto:</mat-label>
					<input matInput type="text-area" formControlName="price" />
					<mat-error>{{ getErrorField(formGroup, 'price') }}</mat-error>
				</mat-form-field>

				<mat-form-field appearance="outline">
					<mat-label>Cantidad de unidades:</mat-label>
					<input matInput type="text-area" formControlName="quantity" />
					<mat-error>{{ getErrorField(formGroup, 'quantity') }}</mat-error>
				</mat-form-field>

				<mat-form-field>
					<mat-label>Tipo</mat-label>
					<mat-select formControlName="tipoId">
						@for (tipo of tipos; track tipo.id) {
						<mat-option [value]="tipo.id">{{ tipo.name }}</mat-option>
						}
					</mat-select>
				</mat-form-field>

				@if (marcas) {
				<mat-form-field>
					<mat-label>Marca</mat-label>
					<mat-select formControlName="marcaId">
						@for (marca of tipoSelected.marcas; track marca.id) {
						<mat-option [value]="marca.id">{{ marca.name }}</mat-option>
						}
					</mat-select>
				</mat-form-field>
				}

				<button [hidden]="sharedProducto" [disabled]="formGroup.invalid" mat-raised-button color="primary" (click)="registerProducto()">
					Registrarse
				</button>
				<button [hidden]="!sharedProducto" [disabled]="formGroup.invalid" mat-raised-button color="primary" (click)="updateProducto()">
					Actualizar
				</button>
				<button mat-raised-button color="warn" (click)="goBack()">Volver</button>
			</form>
		</mat-card-content>
	</mat-card>
</div>
